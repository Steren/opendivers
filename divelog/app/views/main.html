<!DOCTYPE html>

<html>
    <head>
        <title>#{get 'title' /}</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/main.css'}">
        <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/jquery-ui/smoothness/jquery-ui-1.8.5.custom.css'}">
        #{get 'moreStyles' /}
        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        <script src="@{'/public/javascripts/jquery-1.4.2.min.js'}" type="text/javascript" charset="utf-8"></script>
        <script src="@{'/public/javascripts/jquery-ui-1.8.5.custom.min.js'}" type="text/javascript" charset="utf-8"></script>
        #{get 'moreScripts' /}
    </head>
    <body>
        <div id="userOptions">
		#{if controllers.Secure.Security.isConnected()}
            ${controllers.Secure.Security.connected()}
            <a href="@{Secure.logout()}">&{'logout'}</a> 
		#{/if}
		#{else}
            <a href="">&{'signup'}</a>
            <a href="">&{'login'}</a>
		#{/else}
        </div>
        
        #{if !controllers.Secure.Security.isConnected()}
			<div id="signup-box">
			<h2>&{'signup'}</h2>
			#{form @Register.registerNew()}
                <p id="username-field">
                    <label for="username">&{'username'}</label>
                    <input type="text" name="username" id="username" value="&{flash.username}" />
                </p>
			    <p id="email-field">
			        <label for="email">&{'email'}</label>
			        <input type="text" name="email" id="email" value="&{flash.email}" />
			    </p>    
			    <p id="password-field">
			        <label for="password">&{'password'}</label>
			        <input type="password" name="password" id="password" value="" />
			    </p>
			    <p id="signin-field">
			    <input type="submit" id="signin" value="&{'signup'}" />
			    </p>
			 #{/form}
			</div>

			<div id="#login-box">
	        <h2>&{'login'}</h2>
	           #{form @Secure.authenticate()}
	                <p id="email-field">
			            <label for="username">&{'email'}</label>
			            <input type="text" name="username" id="username" value="${flash.username}" />
			        </p>
			        <p id="password-field">
			            <label for="password">&{'password'}</label>
			            <input type="password" name="password" id="password" value="" />
			        </p>
			        <p id="remember-field">
			            <input type="checkbox" name="remember" id="remember" value="true" ${flash.remember ? 'checked="true"' : ''} />
			            <label for="remember">&{'remember'}</label>
			        </p>
			        <p id="signin-field">
			            <input type="submit" id="signin" value="&{'login'}" />
			        </p>
			    #{/form}
			</div>
		#{/if}
		
        #{doLayout /}
    </body>
</html>
